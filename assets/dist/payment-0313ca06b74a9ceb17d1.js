"use strict";(self.webpackChunkcardanopress=self.webpackChunkcardanopress||[]).push([[764],{662:function(e,n,t){t.a(e,(async function(e){var n=t(450),a=t(534),r=t.n(a),s=t(122),c=t(296),i=t(163),o=t(218),d=e([c,i,o]);[c,i,o]=d.then?await d:d,window.addEventListener("alpine:init",(function(){(window.Alpine||{}).data("paymentForm",(function(){return{isVerified:!1,isProcessing:!1,payAmount:1,quantity:1,currentBalance:0,remainingBalance:0,transactionHash:"",showAddress:!1,paymentAddress:"",recaptchaKey:"",syncedBalance:!1,init:function(){var e=this;return(0,n.Z)(r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payAmount=parseFloat(e.$root.dataset.amount),e.paymentAddress=e.$root.dataset.address||"",e.recaptchaKey=e.$root.dataset.recaptcha,""!==e.recaptchaKey||""!==e.paymentAddress){t.next=9;break}return e.isVerified=!0,t.next=7,(0,i.Fr)();case 7:a=t.sent,e.paymentAddress=a.data;case 9:window.addEventListener("cardanoPress:recaptcha",function(){var t=(0,n.Z)(r().mark((function n(t){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isVerified=t.detail,!e.isVerified||e.paymentAddress){n.next=6;break}return n.next=4,(0,i.Fr)();case 4:a=n.sent,e.paymentAddress=a.data;case 6:case"end":return n.stop()}}),n)})));return function(e){return t.apply(this,arguments)}}(),{once:!0});case 10:case"end":return t.stop()}}),t)})))()},isReady:function(e){return void 0===e&&(e="extension"),!("extension"!==e&&!this.isVerified||this.isProcessing)},balanceValue:function(e,n){void 0===n&&(n=!0);var t=this[e+"Balance"];return parseFloat(t)/(n?1e6:1)},lovelaceValue:function(){return(0,o.adaToLovelace)(this.payAmount)},totalAmount:function(e){void 0===e&&(e=!0);var n=100*this.payAmount*(100*this.quantity)/1e4;return e?n.toFixed(1):(0,o.adaToLovelace)(n)},syncBalance:function(){var e=this;return(0,n.Z)(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(0,c.addNotice)({id:"balance",type:"info",text:s.ol.walletSyncing}),e.isProcessing=!0,n.prev=2,n.next=5,(0,c.getConnectedWallet)();case 5:return t=n.sent,n.t0=parseInt,n.next=9,t.getBalance();case 9:n.t1=n.sent,e.currentBalance=(0,n.t0)(n.t1),e.remainingBalance=e.currentBalance-parseInt(e.lovelaceValue()),e.syncedBalance=!0,n.next=18;break;case 15:n.prev=15,n.t2=n.catch(2),(0,c.addNotice)({type:"error",text:n.t2});case 18:(0,c.removeNotice)("balance"),e.isProcessing=!1;case 20:case"end":return n.stop()}}),n,null,[[2,15]])})))()},handlePayment:function(){var e=this;return(0,n.Z)(r().mark((function n(){var t,a,o,d;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.transactionHash="",(0,c.addNotice)({id:"payment",type:"info",text:s.ol.paying}),e.paymentAddress){n.next=9;break}return n.next=5,(0,i.Fr)();case 5:t=n.sent,a=t.success,o=t.data,a&&(e.paymentAddress=o);case 9:return e.isProcessing=!0,n.next=12,(0,i.IR)(e.totalAmount(!1),e.paymentAddress);case 12:d=n.sent,(0,c.removeNotice)("payment"),d.success?(e.transactionHash=d.data.hash,(0,c.addNotice)({type:"info",text:d.data.message})):(0,c.addNotice)({type:"warning",text:d.data}),e.isProcessing=!1;case 16:case"end":return n.stop()}}),n)})))()}}}))})),window.cardanoPressRecaptchaCallback=function(){var e=function(e){return window.dispatchEvent(new CustomEvent("cardanoPress:recaptcha",{detail:e}))};window.addEventListener("alpine:init",(function(){(0,c.waitElement)("#cardanopress-recaptcha").then((function(n){grecaptcha.render(n,{callback:function(){e(!0)},"expired-callback":function(){e(!1)},"error-callback":function(){e(!1)}})}))}))}}))}},function(e){e(e.s=662)}]);