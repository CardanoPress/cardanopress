"use strict";(self.webpackChunkcardanopress=self.webpackChunkcardanopress||[]).push([[764],{356:function(e,t,n){n.a(e,(async function(e){var t=n(53),a=n(546),r=n.n(a),c=n(797),s=n(526),i=n(509),o=n(842),d=e([s,i,o]);[s,i,o]=d.then?await d:d,window.addEventListener("alpine:init",(function(){(window.Alpine||{}).data("paymentForm",(function(){return{isVerified:!1,isProcessing:!1,payAmount:1,quantity:1,currentBalance:0,remainingBalance:0,transactionHash:"",showAddress:!1,paymentAddress:"",recaptchaKey:"",init:function(){var e=this;return(0,t.Z)(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payAmount=parseFloat(e.$root.dataset.amount),e.recaptchaKey=e.$root.dataset.recaptcha,""!==e.recaptchaKey){n.next=8;break}return e.isVerified=!0,n.next=6,(0,i.Fr)();case 6:a=n.sent,e.paymentAddress=a.data;case 8:(0,s.windowLoader)((0,t.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,c.gB)()){t.next=16;break}return t.prev=1,t.next=4,(0,s.getConnectedWallet)();case 4:return n=t.sent,t.t0=parseInt,t.next=8,n.getBalance();case 8:t.t1=t.sent,e.currentBalance=(0,t.t0)(t.t1),e.remainingBalance=e.currentBalance-parseInt(e.lovelaceValue()),t.next=16;break;case 13:t.prev=13,t.t2=t.catch(1),(0,s.addNotice)({type:"error",text:t.t2});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))),window.addEventListener("cardanoPress:recaptcha",function(){var n=(0,t.Z)(r().mark((function t(n){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isVerified=n.detail,!e.isVerified||e.paymentAddress){t.next=6;break}return t.next=4,(0,i.Fr)();case 4:a=t.sent,e.paymentAddress=a.data;case 6:case"end":return t.stop()}}),t)})));return function(e){return n.apply(this,arguments)}}(),{once:!0});case 10:case"end":return n.stop()}}),n)})))()},isReady:function(e){return void 0===e&&(e="extension"),!("extension"!==e&&!this.isVerified||this.isProcessing)},balanceValue:function(e,t){return void 0===t&&(t=!0),this[e+"Balance"]/(t?1e6:1)},lovelaceValue:function(){return(0,o.adaToLovelace)(this.payAmount)},totalAmount:function(e){void 0===e&&(e=!0);var t=this.payAmount*this.quantity;return e?t:(0,o.adaToLovelace)(t)},clipboardValue:function(e){window.navigator.clipboard.writeText(e)},handlePayment:function(){var e=this;return(0,t.Z)(r().mark((function t(){var n,a,o,d;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.transactionHash="",(0,s.addNotice)({id:"payment",type:"info",text:c.ol.paying}),e.paymentAddress){t.next=9;break}return t.next=5,(0,i.Fr)();case 5:n=t.sent,a=n.success,o=n.data,a&&(e.paymentAddress=o);case 9:return e.isProcessing=!0,t.next=12,(0,i.IR)(e.lovelaceValue(),e.paymentAddress);case 12:d=t.sent,(0,s.removeNotice)("payment"),d.success?(e.transactionHash=d.data.hash,(0,s.addNotice)({type:"info",text:d.data.message})):(0,s.addNotice)({type:"warning",text:d.data}),e.isProcessing=!1;case 16:case"end":return t.stop()}}),t)})))()}}}))})),window.cardanoPressRecaptchaCallback=function(){var e=function(e){return window.dispatchEvent(new CustomEvent("cardanoPress:recaptcha",{detail:e}))};(0,s.waitElement)("#cardanopress-recaptcha").then((function(t){grecaptcha.render(t,{callback:function(){e(!0)},"expired-callback":function(){e(!1)},"error-callback":function(){e(!1)}})}))}}))}},function(e){e(e.s=356)}]);