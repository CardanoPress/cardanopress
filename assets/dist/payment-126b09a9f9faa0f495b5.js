"use strict";(self.webpackChunkcardanopress=self.webpackChunkcardanopress||[]).push([[764],{356:function(e,n,t){t.a(e,(async function(e){var n=t(53),a=t(546),r=t.n(a),c=t(797),s=t(526),i=t(509),o=t(842),d=e([s,i,o]);[s,i,o]=d.then?await d:d,window.addEventListener("alpine:init",(function(){(window.Alpine||{}).data("paymentForm",(function(){return{isVerified:!1,isProcessing:!1,payAmount:1,quantity:1,currentBalance:0,remainingBalance:0,transactionHash:"",showAddress:!1,paymentAddress:"",recaptchaKey:"",init:function(){var e=this;return(0,n.Z)(r().mark((function t(){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payAmount=parseFloat(e.$root.dataset.amount),e.recaptchaKey=e.$root.dataset.recaptcha,""!==e.recaptchaKey){t.next=8;break}return e.isVerified=!0,t.next=6,(0,i.Fr)();case 6:a=t.sent,e.paymentAddress=a.data;case 8:(0,s.windowLoader)((0,n.Z)(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,c.gB)()){n.next=16;break}return n.prev=1,n.next=4,(0,s.getConnectedWallet)();case 4:return t=n.sent,n.t0=parseInt,n.next=8,t.getBalance();case 8:n.t1=n.sent,e.currentBalance=(0,n.t0)(n.t1),e.remainingBalance=e.currentBalance-parseInt(e.lovelaceValue()),n.next=16;break;case 13:n.prev=13,n.t2=n.catch(1),(0,s.addNotice)({type:"error",text:n.t2});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))),window.addEventListener("cardanoPress:recaptcha",function(){var t=(0,n.Z)(r().mark((function n(t){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isVerified=t.detail,!e.isVerified||e.paymentAddress){n.next=6;break}return n.next=4,(0,i.Fr)();case 4:a=n.sent,e.paymentAddress=a.data;case 6:case"end":return n.stop()}}),n)})));return function(e){return t.apply(this,arguments)}}(),{once:!0});case 10:case"end":return t.stop()}}),t)})))()},isReady:function(e){return void 0===e&&(e="extension"),!("extension"!==e&&!this.isVerified||this.isProcessing)},balanceValue:function(e,n){return void 0===n&&(n=!0),this[e+"Balance"]/(n?1e6:1)},lovelaceValue:function(){return(0,o.adaToLovelace)(this.payAmount)},totalAmount:function(e){void 0===e&&(e=!0);var n=this.payAmount*this.quantity;return e?n:(0,o.adaToLovelace)(n)},handlePayment:function(){var e=this;return(0,n.Z)(r().mark((function n(){var t,a,o,d;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.transactionHash="",(0,s.addNotice)({id:"payment",type:"info",text:c.ol.paying}),e.paymentAddress){n.next=9;break}return n.next=5,(0,i.Fr)();case 5:t=n.sent,a=t.success,o=t.data,a&&(e.paymentAddress=o);case 9:return e.isProcessing=!0,n.next=12,(0,i.IR)(e.lovelaceValue(),e.paymentAddress);case 12:d=n.sent,(0,s.removeNotice)("payment"),d.success?(e.transactionHash=d.data.hash,(0,s.addNotice)({type:"info",text:d.data.message})):(0,s.addNotice)({type:"warning",text:d.data}),e.isProcessing=!1;case 16:case"end":return n.stop()}}),n)})))()}}}))})),window.cardanoPressRecaptchaCallback=function(){var e=function(e){return window.dispatchEvent(new CustomEvent("cardanoPress:recaptcha",{detail:e}))};window.addEventListener("alpine:init",(function(){(0,s.waitElement)("#cardanopress-recaptcha").then((function(n){grecaptcha.render(n,{callback:function(){e(!0)},"expired-callback":function(){e(!1)},"error-callback":function(){e(!1)}})}))}))}}))}},function(e){e(e.s=356)}]);