"use strict";(self.webpackChunkcardanopress=self.webpackChunkcardanopress||[]).push([[764],{662:function(e,t,n){var a=n(450),r=n(534),s=n.n(r),c=n(122),i=n(296),o=n(163),d=n(879);window.addEventListener("alpine:init",(function(){Alpine.data("paymentForm",(function(){return{isVerified:!1,isProcessing:!1,payAmount:1,quantity:1,currentBalance:0,remainingBalance:0,transactionHash:"",showAddress:!1,paymentAddress:"",recaptchaKey:"",syncedBalance:!1,init:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payAmount=parseFloat(e.$root.dataset.amount),e.paymentAddress=e.$root.dataset.address||"",e.recaptchaKey=e.$root.dataset.recaptcha,""!==e.recaptchaKey||""!==e.paymentAddress){t.next=9;break}return e.isVerified=!0,t.next=7,(0,o.Fr)();case 7:n=t.sent,e.paymentAddress=n.data;case 9:window.addEventListener("cardanoPress:recaptcha",function(){var t=(0,a.Z)(s().mark((function t(n){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isVerified=n.detail,!e.isVerified||e.paymentAddress){t.next=6;break}return t.next=4,(0,o.Fr)();case 4:a=t.sent,e.paymentAddress=a.data;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{once:!0});case 10:case"end":return t.stop()}}),t)})))()},isReady:function(e){return void 0===e&&(e="extension"),!("extension"!==e&&!this.isVerified||this.isProcessing)},balanceValue:function(e,t){void 0===t&&(t=!0);var n=this[e+"Balance"];return parseFloat(n)/(t?1e6:1)},lovelaceValue:function(){return(0,d.adaToLovelace)(this.payAmount)},totalAmount:function(e){void 0===e&&(e=!0);var t=100*this.payAmount*(100*this.quantity)/1e4;return e?t.toFixed(1):(0,d.adaToLovelace)(t)},syncBalance:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,i.addNotice)({id:"balance",type:"info",text:c.ol.walletSyncing}),e.isProcessing=!0,t.prev=2,t.next=5,(0,i.getConnectedWallet)();case 5:return n=t.sent,t.t0=parseInt,t.next=9,n.getBalance();case 9:t.t1=t.sent,e.currentBalance=(0,t.t0)(t.t1),e.remainingBalance=e.currentBalance-parseInt(e.lovelaceValue()),e.syncedBalance=!0,t.next=18;break;case 15:t.prev=15,t.t2=t.catch(2),(0,i.addNotice)({type:"error",text:t.t2});case 18:(0,i.removeNotice)("balance"),e.isProcessing=!1;case 20:case"end":return t.stop()}}),t,null,[[2,15]])})))()},handlePayment:function(){var e=this;return(0,a.Z)(s().mark((function t(){var n,a,r,d;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.transactionHash="",(0,i.addNotice)({id:"payment",type:"info",text:c.ol.paying}),e.paymentAddress){t.next=9;break}return t.next=5,(0,o.Fr)();case 5:n=t.sent,a=n.success,r=n.data,a&&(e.paymentAddress=r);case 9:return e.isProcessing=!0,t.next=12,(0,o.IR)(e.totalAmount(!1),e.paymentAddress);case 12:d=t.sent,(0,i.removeNotice)("payment"),d.success?(e.transactionHash=d.data.hash,(0,i.addNotice)({type:"info",text:d.data.message})):(0,i.addNotice)({type:"warning",text:d.data}),e.isProcessing=!1;case 16:case"end":return t.stop()}}),t)})))()}}}))})),window.cardanoPressRecaptchaCallback=function(){var e=function(e){return window.dispatchEvent(new CustomEvent("cardanoPress:recaptcha",{detail:e}))};window.addEventListener("alpine:init",(function(){(0,i.waitElement)("#cardanopress-recaptcha").then((function(t){grecaptcha.render(t,{callback:function(){e(!0)},"expired-callback":function(){e(!1)},"error-callback":function(){e(!1)}})}))}))}}},function(e){e(e.s=662)}]);